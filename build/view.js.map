{"version":3,"file":"view.js","mappings":";;;;AAAAA,MAAM,CAACC,UAAU,CAAC,CAAC;AAEnBD,MAAM,CAACE,QAAQ,CAAC,CAACC,KAAK,CAAC,UAAUC,CAAC,EAAE;EAEhC,MAAMC,MAAM,GAAGD,CAAC,CAAC,WAAW,CAAC;EAE7B,IAAI,CAACC,MAAM,EAAE;EAEb,MAAMC,MAAM,GAAGD,MAAM,CAACE,KAAK,CAAC,CAAC;EAC7B;EACA;EACA;;EAEA,IAAIC,QAAQ,GAAGC,WAAW,CAAC,CAAC;EAE5B,MAAMC,MAAM,GAAGN,CAAC,CAAC,WAAW,EAAE;IAC1B,IAAI,EAAE;EACV,CAAC,CAAC;EAEFM,MAAM,CAACC,IAAI,CAAC,OAAO,EAAE,GAAGL,MAAM,IAAI,CAAC;EACnCI,MAAM,CAACC,IAAI,CAAC,QAAQ,EAAE,GAAGL,MAAM,IAAI,CAAC;EACpCI,MAAM,CAACE,GAAG,CAAC,QAAQ,EAAE,mBAAmB,CAAC;;EAGzC;EACAP,MAAM,CAACQ,IAAI,CAACH,MAAM,CAAC;EACnBI,SAAS,CAAC,UAAU,EAAE,wCAAwC,EAAE,UAAUC,IAAI,EAAE;IAAE;IAC9EX,CAAC,CAAC,WAAW,CAAC,CAACS,IAAI,CAACE,IAAI,CAAC;EAC7B,CAAC,CAAC;EACF;EACA,IAAIC,QAAQ,GAAGC,MAAM,CAACC,UAAU,CAAC,oCAAoC,CAAC,CAACC,OAAO;EAC9E,IAAI,CAACH,QAAQ,EAAE;IAAE;IACb,IAAI,MAAM,KAAKC,MAAM,CAACG,iBAAiB,CAACC,QAAQ,IAAI,QAAQ,KAAKJ,MAAM,CAACG,iBAAiB,CAACC,QAAQ,EAAE;MAChGL,QAAQ,GAAG,IAAI;IACnB;EACJ;EAEAZ,CAAC,CAACa,MAAM,CAAC,CAACK,MAAM,CAAC,YAAY;IACzBZ,MAAM,CAACH,KAAK,CAACF,MAAM,CAACE,KAAK,CAAC,CAAC,CAAC;IAC5BG,MAAM,CAACa,MAAM,CAAClB,MAAM,CAACE,KAAK,CAAC,CAAC,CAAC;IAC7B;IACA;EACJ,CAAC,CAAC;EAEF,IAAIS,QAAQ,EAAE;IACV,IAAIQ,QAAQ,GAAG,KAAK;IACpBC,EAAE,CAACC,SAAS,CAAC,IAAI,CAAC;IAClBtB,CAAC,CAAC,KAAK,CAAC,CAACuB,OAAO,CAAC,UAAUC,CAAC,EAAE;MAC1BA,CAAC,CAACC,cAAc,CAAC,CAAC;IACtB,CAAC,CAAC;IACFzB,CAAC,CAAC,KAAK,CAAC,CAAC0B,EAAE,CAAC,OAAO,EAAE,YAAY;MAC7B,IAAIC,CAAC,GAAG3B,CAAC,CAAC,IAAI,CAAC,CAAC4B,GAAG,CAAC,CAAC;MACrBC,OAAO,CAACC,GAAG,CAAC,cAAc,GAAGH,CAAC,GAAG,aAAa,GAAGP,QAAQ,CAAC;MAC1D,IAAIO,CAAC,IAAI,IAAI,IAAIA,CAAC,CAACI,MAAM,GAAG,CAAC,EAAE;QAC3B,IAAIX,QAAQ,EAAE;UACVY,KAAK,CAACL,CAAC,CAACM,MAAM,CAACN,CAAC,CAACI,MAAM,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;QACpC;MACJ;IACJ,CAAC,CAAC;IACF/B,CAAC,CAAC,KAAK,CAAC,CAACkC,KAAK,CAAC,UAAUV,CAAC,EAAE;MACxB,IAAIG,CAAC,GAAGH,CAAC,CAACW,MAAM,CAACC,KAAK;QAClBC,CAAC,GAAGb,CAAC,CAACc,aAAa,CAACC,OAAO;MAC/BV,OAAO,CAACC,GAAG,CAAC,cAAc,GAAGH,CAAC,CAAC;MAC/B,IAAIA,CAAC,IAAI,IAAI,IAAIA,CAAC,KAAK,EAAE,EAAE;QACvBA,CAAC,GAAGa,MAAM,CAACC,YAAY,CAACjB,CAAC,CAACe,OAAO,CAAC;MACtC;MACAnB,QAAQ,GAAII,CAAC,CAACe,OAAO,KAAK,GAAI;MAC9Bf,CAAC,CAACC,cAAc,CAAC,CAAC;MAClBO,KAAK,CAACL,CAAC,EAAEU,CAAC,CAAC;IACf,CAAC,CAAC;IACFvC,QAAQ,CAAC4C,cAAc,CAAC,UAAU,CAAC,CAACC,gBAAgB,CAAC,OAAO,EAAE,YAAY;MACtE7C,QAAQ,CAAC4C,cAAc,CAAC,IAAI,CAAC,CAACE,KAAK,CAAC,CAAC;IACzC,CAAC,CAAC;IAEF,SAASZ,KAAKA,CAACL,CAAC,EAAEU,CAAC,EAAE;MACjB,IAAIQ,CAAC,GAAG;QACJC,GAAG,EAAEnB,CAAC;QACNY,OAAO,EAAEF,CAAC;QACVU,IAAI,EAAE;MACV,CAAC;MACDlB,OAAO,CAACC,GAAG,CAAC,OAAO,GAAGe,CAAC,CAACC,GAAG,CAAC;MAC5BzB,EAAE,CAAC2B,OAAO,CAACH,CAAC,CAAC;IACjB;EACJ;AACJ,CAAC,CAAC;AAEF,SAASxC,WAAWA,CAAA,EAAG;EACnB,MAAM4C,QAAQ,GAAG,IAAIC,eAAe,CAACrC,MAAM,CAACsC,QAAQ,CAACC,MAAM,CAAC;EAC5D,OAAOH,QAAQ,CAACI,GAAG,CAAC,IAAI,CAAC;AAC7B;AAEA,SAASC,MAAMA,CAAA,EAAG;EACdjC,EAAE,CAACkC,SAAS,CAAC,CAAC;EACdzD,QAAQ,CAAC4C,cAAc,CAAC,IAAI,CAAC,CAACE,KAAK,CAAC,CAAC;AACzC,C","sources":["webpack://ev-crossword-viewer/./src/view.js"],"sourcesContent":["jQuery.noConflict();\r\n\r\njQuery(document).ready(function ($) {\r\n\r\n    const parent = $('#myParent');\r\n\r\n    if (!parent) return;\r\n\r\n    const cwidth = parent.width();\r\n    // if (window.screen.width<500) {\r\n    //     cwidth = window.screen.width-25;\r\n    // }\r\n\r\n    var cwchosen = getChosenCw();\r\n\r\n    const canvas = $('<canvas/>', {\r\n        'id': 'cwCanvas'\r\n    });\r\n\r\n    canvas.attr('width', `${cwidth}px`)\r\n    canvas.attr('height', `${cwidth}px`);\r\n    canvas.css('border', '1px solid #0b0b0b');\r\n\r\n\r\n    // var canvas = '<canvas id=\"cwCanvas\" width=\"'+cwidth+'\" height=\"'+cwidth+'\" style=\"border:1px solid #0b0b0b\"></canvas>';\r\n    parent.html(canvas);\r\n    crossword('cwCanvas', '<?php echo (esc_html($post->guid)); ?>', function (data) { //cwhtml5/cw\r\n        $('#messages').html(data);\r\n    });\r\n    // workaround to make keyboards visible and get pressed keys on certain mobile browsers.\r\n    var isMobile = window.matchMedia(\"only screen and (max-width: 760px)\").matches;\r\n    if (!isMobile) { // workaround because window.matchMedia fails at least on older iPads\r\n        if (\"iPad\" === window.clientInformation.platform || \"iPhone\" === window.clientInformation.platform) {\r\n            isMobile = true;\r\n        }\r\n    }\r\n\r\n    $(window).resize(function () {\r\n        canvas.width(parent.width());\r\n        canvas.height(parent.width());\r\n        // canvas.attr('width', `${parent.width()}px`);\r\n        // canvas.attr('height', `${parent.width()}px`);\r\n    })\r\n\r\n    if (isMobile) {\r\n        var isChrome = false;\r\n        cw.setMobile(true);\r\n        $('#kb').keydown(function (e) {\r\n            e.preventDefault();\r\n        });\r\n        $('#kb').on(\"input\", function () {\r\n            var c = $(this).val();\r\n            console.log(\"input, c is \" + c + \" isChrome? \" + isChrome);\r\n            if (c != null && c.length > 0) {\r\n                if (isChrome) {\r\n                    cwkbd(c.charAt(c.length - 1), 1);\r\n                }\r\n            }\r\n        });\r\n        $('#kb').keyup(function (e) {\r\n            var c = e.target.value,\r\n                k = e.originalEvent.keyCode;\r\n            console.log(\"keyup, c is \" + c);\r\n            if (c == null || c === \"\") {\r\n                c = String.fromCharCode(e.keyCode);\r\n            }\r\n            isChrome = (e.keyCode === 229);\r\n            e.preventDefault();\r\n            cwkbd(c, k);\r\n        });\r\n        document.getElementById(\"cwCanvas\").addEventListener('click', function () {\r\n            document.getElementById(\"kb\").focus();\r\n        });\r\n\r\n        function cwkbd(c, k) {\r\n            var o = {\r\n                key: c,\r\n                keyCode: k,\r\n                mbke: true\r\n            };\r\n            console.log(\"char=\" + o.key)\r\n            cw.keyDown(o);\r\n        }\r\n    }\r\n});\r\n\r\nfunction getChosenCw() {\r\n    const qsParams = new URLSearchParams(window.location.search);\r\n    return qsParams.get('cw');\r\n}\r\n\r\nfunction toggle() {\r\n    cw.toggleDir();\r\n    document.getElementById(\"kb\").focus();\r\n}\r\n"],"names":["jQuery","noConflict","document","ready","$","parent","cwidth","width","cwchosen","getChosenCw","canvas","attr","css","html","crossword","data","isMobile","window","matchMedia","matches","clientInformation","platform","resize","height","isChrome","cw","setMobile","keydown","e","preventDefault","on","c","val","console","log","length","cwkbd","charAt","keyup","target","value","k","originalEvent","keyCode","String","fromCharCode","getElementById","addEventListener","focus","o","key","mbke","keyDown","qsParams","URLSearchParams","location","search","get","toggle","toggleDir"],"sourceRoot":""}